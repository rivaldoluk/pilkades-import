<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pilkades 2026 - Aktivasi Wallet Voting</title>
  <style>
    body {font-family:Arial,sans-serif; background:#000; color:white; text-align:center; padding:20px; margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;}
    .card {background:#111; padding:30px; border-radius:20px; max-width:420px; width:95%; box-shadow:0 10px 30px rgba(255,107,0,0.3);}
    h1 {color:#ff6b00; margin:0 0 20px; font-size:2.2em;}
    .seed {background:#222; padding:18px; border-radius:12px; font-family:monospace; font-size:1.15em; line-height:1.6; word-spacing:8px; margin:20px 0;}
    button {background:#ff6b00; color:white; border:none; padding:16px 32px; font-size:20px; border-radius:50px; cursor:pointer; margin:10px;}
    button:hover {background:#e55a00;}
    .footer {margin-top:30px; font-size:0.9em; color:#888;}
  </style>
</head>
<body>
  <div class="card">
    <h1>Pilkades 2026</h1>
    <p><strong>Wallet voting kamu sudah siap!</strong></p>
    <div class="box">
    <p>Ikuti 3 langkah mudah ini:</p>
    
    <ol>
      <li>Buka aplikasi <strong>MetaMask</strong> (download dulu kalau belum punya)</li>
      <li>Pilih <strong>"Import Wallet"</strong> atau <strong>"Sudah punya wallet"</strong></li>
      <li>Salin private key di bawah ini → paste → selesai!</li>
    </ol>
    <p>Klik tombol di bawah → MetaMask akan terbuka otomatis dan langsung mengisi 12 kata rahasiamu.</p>

    <div class="seed" id="seedBox">Sedang memuat 12 kata…</div>

    <button id="importBtn" onclick="importToMetaMask()">Import ke MetaMask Sekarang</button>
    <button onclick="location.href='https://metamask.app.link'">Buka MetaMask (jika tombol tidak jalan)</button>

    <div class="footer">
      Panitia Desa • Sistem Voting Blockchain 2026
    </div>
  </div>

  <script>
    // Ambil seed phrase dari URL (?seed=...)
    const params = new URLSearchParams(location.search);
    const seed = params.get('seed');

    if (!seed || seed.split(/\s+/).length !== 12) {
      document.body.innerHTML = "<h1 style='color:red;padding:50px;'>Link tidak valid atau sudah rusak!</h1>";
    } else {
      // Tampilkan 12 kata
      document.getElementById('seedBox').textContent = seed;

      // Fungsi import otomatis ke MetaMask (deep link)
      window.importToMetaMask = function() {
        const metamaskDeepLink = `https://metamask.app.link/dapp/${location.origin}${location.pathname}?seed=${encodeURIComponent(seed)}`;
        location.href = `ethereum:${encodeURIComponent(seed)}@import`; // cara paling cepat (beberapa versi langsung buka import)
        setTimeout(() => {
          location.href = "https://metamask.app.link"; // fallback
        }, 800);
        alert("MetaMask sedang dibuka…\n12 kata akan otomatis terisi!\nKalau tidak jalan, klik tombol kedua.");
      };
    }
  </script>

  <!-- Fallback terbaik 2025: langsung arahkan ke MetaMask Mobile + auto-fill -->
  <script>
    // Cara terbaik 2025: pakai intent MetaMask (work di Android & iOS)
    if (seed) {
      document.getElementById('importBtn').onclick = function() {
        const intent = `metamask://wc?uri=${encodeURIComponent('import:' + seed)}`;
        location.href = intent;
        setTimeout(() => {
          location.href = "https://metamask.app.link";
        }, 1000);
      };
    }
  </script>
</body>
</html>


